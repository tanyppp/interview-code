<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function createArr() {
      return [9, 8, 7, 6, 5, 4, 3, 2, 1];
    }

    // 比较
    function compare(a, b) {
      return a > b;
    }

    // 交换
    function swap(arr, i, j) {
      const temp = arr[i];
      arr[i] = arr[j];
      arr[j] = temp;
    }

    // 冒泡
    function bubbleSort(arr = []) {
      const len = arr.length;

      for (let i = 0; i < len - 1; i++) {
        for (let j = 0; j < len - i; j++) {
          if (compare(arr[j], arr[j + 1])) {
            swap(arr, j, j + 1);
          }
        }
      }

      return arr;
    }

    // 选择
    function selectSort(arr = []) {
      const len = arr.length;

      for (let i = 0; i < len - 1; i++) {
        let maxIndex = 0;
        for (let j = 0; j < len - i; j++) {
          if (compare(arr[j], arr[maxIndex])) {
            maxIndex = j;
          }
        }
        swap(arr, len - i - 1, maxIndex);
      }

      return arr;
    }

    // 简单快速
    function simpleQuickSort(arr = []) {
      if (arr.length < 2) {
        return arr;
      }

      const begin = 0;
      const len = arr.length;
      let left = [];
      let right = [];
      const mid = arr[begin];

      for (let i = begin + 1; i < len; i++) {
        if (arr[i] <= mid) {
          left.push(arr[i]);
        } else {
          right.push(arr[j]);
        }
      }

      left = simpleQuickSort(left);
      right = simpleQuickSort(right);

      left.push(mid);

      return left.concat(right);
    }

    // 快速
    function quickSort(arr = [], begin = 0, end = arr.length - 1) {
      if (arr.length < 2 || begin >= end) {
        return arr;
      }

      let left = begin + 1;
      let right = end;
      const mid = arr[begin];

      while (left < right) {
        while (left < right && arr[left] < mid) {
          left++;
        }
        while (left < right && arr[right] > mid) {
          right--;
        }
        // debugger;
        if (left < right) {
          swap(arr, left, right);
        }
      }
      swap(arr, begin, arr[left] > mid ? left - 1 : left);
      quickSort(arr, begin, left - 1);
      quickSort(arr, left, end);

      return arr;
    }

    // function quickSort(array) {
    //   if (array.length < 2) return array
    //   let pivot = array[array.length - 1]
    //   let left = array.filter((v, i) => v <= pivot && i != array.length - 1)
    //   let right = array.filter(v => v > pivot)
    //   return [...quickSort(left), pivot, ...quickSort(right)]
    // }

    console.log(bubbleSort(createArr()));
    console.log(selectSort(createArr()));
    console.log(simpleQuickSort(createArr()));
    console.log(quickSort(createArr()));
  </script>
</body>

</html>